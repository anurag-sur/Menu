<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>AR Food Menu</title>

<!-- DO NOT CHANGE -->
<script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
<script src="https://raw.githack.com/AR-js-org/AR.js/3.3.2/aframe/build/aframe-ar.js"></script>

<!-- Font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
*{ box-sizing:border-box; }
body{
  margin:0; overflow:hidden;
  font-family:'Space Grotesk',sans-serif;
  background:linear-gradient(135deg,#0f0c29,#302b63,#24243e);
  background-size:400% 400%;
  animation:gradientShift 15s ease infinite;
}

@keyframes gradientShift{
  0%,100%{background-position:0% 50%}
  50%{background-position:100% 50%}
}

/* Glassmorphic Buttons */
.btn{
  position:absolute;
  bottom:30px;
  padding:14px 24px;
  background:rgba(255,255,255,.08);
  backdrop-filter:blur(20px) saturate(180%);
  -webkit-backdrop-filter:blur(20px) saturate(180%);
  color:white;
  border:1px solid rgba(255,255,255,.18);
  border-radius:20px;
  font-size:18px;
  font-weight:600;
  z-index:10;
  cursor:pointer;
  transition:all .3s cubic-bezier(.4,0,.2,1);
  box-shadow:0 8px 32px rgba(0,0,0,.4),
             inset 0 1px 0 rgba(255,255,255,.15);
  letter-spacing:.5px;
}
.btn:hover{ 
  background:rgba(255,255,255,.15);
  transform:translateY(-2px);
  box-shadow:0 12px 40px rgba(0,0,0,.5),
             inset 0 1px 0 rgba(255,255,255,.2);
}
.btn:active{ 
  transform:scale(.96) translateY(-1px);
  box-shadow:0 4px 16px rgba(0,0,0,.3);
}

#left{ left:20px; }
#right{ right:20px; }
#rate{ 
  left:50%; 
  transform:translateX(-50%);
  background:linear-gradient(135deg,rgba(255,107,107,.2),rgba(255,182,107,.2));
  border:1px solid rgba(255,150,107,.3);
}
#rate:hover{
  background:linear-gradient(135deg,rgba(255,107,107,.3),rgba(255,182,107,.3));
}

/* Premium Info Card */
#info{
  position:absolute;
  top:30px;
  left:50%;
  transform:translateX(-50%);
  background:rgba(255,255,255,.1);
  backdrop-filter:blur(20px) saturate(180%);
  -webkit-backdrop-filter:blur(20px) saturate(180%);
  color:white;
  padding:16px 28px;
  border-radius:24px;
  font-size:20px;
  font-weight:600;
  z-index:10;
  border:1px solid rgba(255,255,255,.2);
  box-shadow:0 8px 32px rgba(0,0,0,.4),
             inset 0 1px 0 rgba(255,255,255,.15);
  letter-spacing:.5px;
  animation:slideDown .6s cubic-bezier(.4,0,.2,1);
}

@keyframes slideDown{
  from{transform:translateX(-50%) translateY(-20px);opacity:0}
  to{transform:translateX(-50%) translateY(0);opacity:1}
}

/* Loading Screen */
#loading{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  background:rgba(15,12,41,.95);
  backdrop-filter:blur(10px);
  color:white;
  font-size:22px;
  font-weight:600;
  z-index:20;
  gap:20px;
}

.loader{
  width:60px;
  height:60px;
  border:4px solid rgba(255,255,255,.1);
  border-top:4px solid #fff;
  border-radius:50%;
  animation:spin 1s linear infinite;
}

@keyframes spin{
  to{transform:rotate(360deg)}
}

/* Rating Menu */
#ratingMenu{
  position:absolute;
  bottom:100px;
  left:50%;
  transform:translateX(-50%) scale(.9);
  background:rgba(255,255,255,.12);
  backdrop-filter:blur(20px) saturate(180%);
  -webkit-backdrop-filter:blur(20px) saturate(180%);
  padding:16px 24px;
  border-radius:24px;
  display:none;
  z-index:10;
  border:1px solid rgba(255,255,255,.2);
  box-shadow:0 12px 48px rgba(0,0,0,.5);
  opacity:0;
  transition:all .3s cubic-bezier(.4,0,.2,1);
}

#ratingMenu.show{
  display:block;
  opacity:1;
  transform:translateX(-50%) scale(1);
}

.star{
  font-size:36px;
  cursor:pointer;
  color:rgba(255,255,255,.2);
  transition:all .2s cubic-bezier(.4,0,.2,1);
  display:inline-block;
  margin:0 4px;
  filter:drop-shadow(0 2px 8px rgba(0,0,0,.3));
}
.star:hover{ 
  transform:scale(1.2) rotate(-10deg);
  color:rgba(255,213,79,.6);
}
.star.active{ 
  color:#FFD54F;
  animation:starPop .4s cubic-bezier(.4,0,.2,1);
}
.star:active{ 
  transform:scale(1.35) rotate(-10deg);
}

@keyframes starPop{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.3)}
}

/* Toast Notification */
#toast{
  position:absolute;
  top:100px;
  left:50%;
  transform:translateX(-50%) translateY(-20px);
  background:linear-gradient(135deg,rgba(16,185,129,.95),rgba(5,150,105,.95));
  backdrop-filter:blur(10px);
  color:white;
  padding:12px 24px;
  border-radius:20px;
  font-size:16px;
  font-weight:600;
  opacity:0;
  transition:all .4s cubic-bezier(.4,0,.2,1);
  z-index:30;
  box-shadow:0 8px 32px rgba(16,185,129,.4);
  border:1px solid rgba(255,255,255,.3);
}

#toast.show{
  opacity:1;
  transform:translateX(-50%) translateY(0);
}

/* Interaction Hint */
#hint{
  position:absolute;
  bottom:120px;
  left:50%;
  transform:translateX(-50%);
  color:rgba(255,255,255,.6);
  font-size:14px;
  font-weight:500;
  z-index:5;
  animation:pulse 2s ease-in-out infinite;
}

@keyframes pulse{
  0%,100%{opacity:.4}
  50%{opacity:.8}
}

/* Particle Background */
#particles{
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:1;
}

.particle{
  position:absolute;
  width:4px;
  height:4px;
  background:rgba(255,255,255,.3);
  border-radius:50%;
  animation:float linear infinite;
}

@keyframes float{
  to{transform:translateY(-100vh)}
}
</style>
</head>

<body>

<div id="info"></div>
<div id="loading">Loading model…</div>
<div id="toast"></div>

<button id="left" class="btn">◀</button>
<button id="rate" class="btn">Rate</button>
<button id="right" class="btn">▶</button>

<div id="ratingMenu">
  <span class="star" data-s="1">★</span>
  <span class="star" data-s="2">★</span>
  <span class="star" data-s="3">★</span>
  <span class="star" data-s="4">★</span>
  <span class="star" data-s="5">★</span>
</div>

<a-scene embedded vr-mode-ui="enabled:false"
  arjs="sourceType:webcam; debugUIEnabled:false;">

  <a-entity light="type:ambient;intensity:0.8"></a-entity>
  <a-entity light="type:directional;intensity:0.4" position="1 2 1"></a-entity>

  <a-entity camera></a-entity>
  <a-entity id="holder" position="0 0 -4"></a-entity>
</a-scene>

<script>
const foods=[
 {model:"models/burger/scene.gltf",name:"Burger",price:"₹149",scale:.4},
 {model:"models/pizza/scene.gltf",name:"Pizza",price:"₹299",scale:2},
 {model:"models/fries/scene.gltf",name:"Fries",price:"₹99",scale:.5}
];

const holder=document.getElementById("holder");
const info=document.getElementById("info");
const loading=document.getElementById("loading");
const toast=document.getElementById("toast");
const ratingMenu=document.getElementById("ratingMenu");

let index=0;
let yaw=0,pitch=0,scale=foods[0].scale;
let autoRotate=true;
let rating=0;

const model=document.createElement("a-entity");
holder.appendChild(model);

function showToast(t){
 toast.textContent=t;
 toast.style.opacity=1;
 setTimeout(()=>toast.style.opacity=0,1500);
}

function loadFood(i){
 loading.style.display="flex";
 model.setAttribute("gltf-model",foods[i].model);
 scale=foods[i].scale;
 model.object3D.scale.set(scale,scale,scale);
 yaw=pitch=0;
 info.textContent=`${foods[i].name} • ${foods[i].price}`;
 rating=0;
 updateStars();
}

model.addEventListener("model-loaded",()=>{
 loading.style.display="none";
});

function updateStars(){
 document.querySelectorAll(".star").forEach(s=>{
   s.classList.toggle("active",s.dataset.s<=rating);
 });
}

loadFood(0);

left.onclick=()=>{ index=(index+foods.length-1)%foods.length; loadFood(index); }
right.onclick=()=>{ index=(index+1)%foods.length; loadFood(index); }

rate.onclick=()=>{
 ratingMenu.style.display=
 ratingMenu.style.display==="block"?"none":"block";
};

document.querySelectorAll(".star").forEach(s=>{
 s.onclick=()=>{
   rating=s.dataset.s;
   updateStars();
   showToast(`Rated ${rating} ★`);
 };
});

/* Touch */
let dragging=false,lx=0,ly=0,zoom=0;

function dist(t){
 const dx=t[0].clientX-t[1].clientX;
 const dy=t[0].clientY-t[1].clientY;
 return Math.sqrt(dx*dx+dy*dy);
}

document.addEventListener("touchstart",e=>{
 autoRotate=false;
 if(e.touches.length===1){
  dragging=true;
  lx=e.touches[0].clientX;
  ly=e.touches[0].clientY;
 }
 if(e.touches.length===2) zoom=dist(e.touches);
});

document.addEventListener("touchmove",e=>{
 if(e.touches.length===2){
  const d=dist(e.touches);
  scale*=d/zoom;
  scale=Math.max(.2,Math.min(2.5,scale));
  model.object3D.scale.set(scale,scale,scale);
  zoom=d; return;
 }
 if(dragging){
  yaw+=(e.touches[0].clientX-lx)*.01;
  pitch+=(e.touches[0].clientY-ly)*.01;
  pitch=Math.max(-1.4,Math.min(1.4,pitch));
  lx=e.touches[0].clientX;
  ly=e.touches[0].clientY;
  model.object3D.rotation.set(pitch,yaw,0);
 }
});

document.addEventListener("touchend",()=>{
 dragging=false;
 setTimeout(()=>autoRotate=true,2000);
});

/* Auto Rotate */
AFRAME.registerComponent("spin",{tick:()=>{
 if(autoRotate){
  yaw+=.002;
  model.object3D.rotation.y=yaw;
 }
}});
model.setAttribute("spin","");
</script>

</body>
</html>

